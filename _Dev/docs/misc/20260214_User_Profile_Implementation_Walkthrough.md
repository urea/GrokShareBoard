# Grok Share Board ウォークスルー

## 実装済み機能
- **プロジェクトセットアップ**: Next.js App Router, Tailwind CSS v4, SQLite (`better-sqlite3`)。
- **データベース**: URL、メタデータ、ユーザープロンプトを保存する `posts` テーブル。
- **バックエンド API**:
    - `GET /api/posts`: 共有された生成物を一覧表示。`?q=` による検索、`?user_id=` によるユーザーフィルタリングをサポート。
    - `POST /api/posts`: 新しい生成物を保存（ユーザーIDを含む）。
    - `GET /api/preview`: **Playwright** を使用して Grok URL から OpenGraph メタデータをスクレイピング（ユーザーID抽出ロジック含む）。
- **フロントエンド**:
    - **ShareInput**: Grok URLを貼り付け -> プレビュー -> 共有。
    - **VideoCard**: ホバーで再生される動画プレビュー。ユーザープロファイルへのリンクを追加。
    - **検索**: プロンプトテキストによるリアルタイムフィルタリング。
    - **ユーザープロファイル**: `/user/[userId]` で特定ユーザーの投稿一覧を表示。
    - **レスポンシブグリッド**: 画面サイズに適応。

## 検証結果
### 自動テスト
- `scripts/test_user_profile.ts`:
    - APIエンドポイント(`/api/posts`)の機能検証。
    - 指定した `user_id` で投稿を作成し、フィルタリングして取得できることを確認済み。
- `scripts/test_metadata.ts`:
    - `fetchMetadata` 関数を検証。
    - **注意**: スクレイパーは Playwright (ヘッドレス) を使用。本番環境では Grok.com がヘッドレスブラウザをブロックしたり、より長いタイムアウトやCAPTCHA対応が必要になる可能性がある。
    - 現在のステータス: 実装済み、実行可能。

### 手動検証手順
1. **アプリの起動**:
   ```bash
   npm run dev
   ```
2. **URLの共有**:
   - Grok URLを貼り付け（例: `https://grok.com/imagine/...`）。
   - "Analyze" をクリック。
   - タイトル、プロンプト、画像が表示されることを確認。
   - "Share to Board" をクリック。
3. **フィードの表示**:
   - グリッドに新しいカードが表示されることを確認。
   - ホバーして動画が再生されることを確認。
4. **検索**:
   - プロンプトに含まれる単語を入力。
   - フィードが正しくフィルタリングされることを確認。

## プロジェクト構成
- `_App/`: ソースコード。
- `_Data/`: `grokshare.db` (SQLiteデータベース)。
- `_Dev/`: ドキュメント。

## 次のステップ
- ユーザープロファイルの実装。
- "いいね" 機能の追加。
- スクレイパーの堅牢性向上（プロキシ、ステルス化）。
- Vercelへのデプロイ（DBをPostgres/Tursoに変更する必要あり）。
